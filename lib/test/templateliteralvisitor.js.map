{"version":3,"file":"templateliteralvisitor.js","sourceRoot":"","sources":["../../src/test/templateliteralvisitor.ts"],"names":[],"mappings":"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","sourcesContent":["import * as assert from 'assert';\nimport * as Expr from './../linq/expressions/expressionvisitor';\nimport { TemplateLiteralVisitor } from './../linq/expressions/templateliteralvisitor';\n\ndescribe(\"When using TemplateLiteral for ExpressionVisitor\", () => {\n    var template: TemplateLiteralVisitor,\n        vars = { number: 5, array: [8, 7, 6, 5, 4, 3, 2, 1] }\n\n    beforeEach(() => {\n        template = new TemplateLiteralVisitor((value) => {\n            switch (typeof value)\n            {\n                case 'object':\n                    if ((<Object>value).hasOwnProperty('key'))\n                        return '<a href=\"#' + value['key'] + '\">' + value['value'] + '</a>';\n                    else\n                        return '<a href=\"#' + value['value'] + '\">' + value['value'] + '</a>';\n                        \n                default:\n                    return value;\n            }\n        });\n    })\n\n    var number = 5;\n\n    it(\"should handle a simple template literal\", () => {\n        let reduced = template.visitLambda(() => `My number is ${this.number} and my next is ${this.number + 1}`),\n            expr = template.evaluate(reduced, vars);\n\n        var expression = new TemplateLiteralVisitor().visitLambda(() => `template string adds ${2 + number} to ${2+5} like nothing`);\n\n        let val = TemplateLiteralVisitor.evaluate(expression, { number: number })\n\n        //assert.ok(template.isSolvable == true, \"Expected a solvable expression\");\n        assert.ok(expr.type == Expr.ExpressionType.Literal, \"Expected a literal\");\n        assert.ok((<Expr.ILiteralExpression>expr).value == 'My number is 5 and my next is 6');\n    })\n\n    it(\"should handle objects as expression\", () => {\n\n        let reduced = template.visitLambda(() => `My number is ${{ key: 0 + 1, value: this.number + 1 }} and my next is ${this.number + 1}`)\n            \n        assert.equal(reduced.type, Expr.ExpressionType.TemplateLiteral);\n        assert.equal((<Expr.ITemplateLiteralExpression>reduced).elements.length, 4);\n\n        assert.equal((<Expr.ITemplateLiteralExpression>reduced).elements[1].type, Expr.ExpressionType.Object);\n        assert.equal((<Expr.ITemplateLiteralExpression>reduced).elements[3].type, Expr.ExpressionType.Binary);\n\n        let expr = template.evaluate(reduced, vars);\n\n        assert.ok((<Expr.ILiteralExpression>expr).value == 'My number is <a href=\"#1\">6</a> and my next is 6');\n    })\n})"]}