{"version":3,"file":"enumerable.js","sourceRoot":"","sources":["../../src/linq/enumerable.ts"],"names":[],"mappings":"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","sourcesContent":["import { Operator, OperatorType } from './operators/operator';\r\nimport { OrderByOperator } from './operators/orderbyoperator';\r\nimport { SkipOperator } from './operators/skipoperator';\r\nimport { TakeOperator } from './operators/takeoperator';\r\nimport { WhereOperator } from './operators/whereoperator';\r\nimport { SelectOperator } from './operators/selectoperator';\r\nimport { JoinOperator, JoinType } from './operators/joinoperator';\r\n\r\nimport { RenameVisitor } from './expressions/renamevisitor';\r\nimport { RemapVisitor } from './expressions/remapvisitor';\r\n\r\nimport { Operations } from './operations';\r\n\r\nexport { OperatorType };\r\n\r\n(Symbol as any).asyncIterator = Symbol.asyncIterator || \"__@@asyncIterator__\";\r\n\r\nexport interface IEnumerableOptions<TEntity> {\r\n    query?: IEnumerable<TEntity>\r\n    parent?: IEnumerable<any>\r\n}\r\n\r\nexport interface IEnumerable<TEntity> extends Iterable<TEntity>, AsyncIterable<TEntity> {\r\n    readonly operations: Operations<TEntity>\r\n\r\n    from(items: Array<TEntity>)\r\n    from(items: Iterable<TEntity>)\r\n    from(items: AsyncIterable<TEntity>)\r\n\r\n    /**\r\n    * Where clause using OData $filter expression returning either true or false. Any parameters used is properties of TEntity\r\n    * @param predicate OData expression\r\n    */\r\n    where(predicate: string): this\r\n    /**\r\n     * Where clause using Javascript expression returning either true or false\r\n     * @param predicate javascript expression\r\n     * @param parameters any javascript parameters has to be declared\r\n     */\r\n    where(predicate: (it: TEntity, ...param: any[]) => boolean, ...parameters: any[]): this\r\n\r\n    //orderBy(property: (it: TEntity) => void): this\r\n    //range(start: number, count: number): this\r\n    skip(count: number): this\r\n    take(count: number): this\r\n    //reverse(): this\r\n\r\n    join<TInner, TResult>(inner: IEnumerable<TInner>, outerKey: (a: TEntity) => void, innerKey: (b: TInner) => void, selector: (outer: TEntity, inner: IEnumerable<TInner>) => TResult): IEnumerable<TResult>\r\n    select<TResult>(selector: (it: TEntity) => TResult): IEnumerable<TResult>\r\n\r\n    first(items?: Array<TEntity>): TEntity\r\n    firstAsync(items?: Array<TEntity>): Promise<TEntity>\r\n\r\n    toArray(items: Array<TEntity>): Array<TEntity>\r\n    toArray(): Array<TEntity>\r\n\r\n    toArrayAsync(items: Array<TEntity>): Promise<Array<TEntity>>\r\n    toArrayAsync(): Promise<Array<TEntity>>\r\n}\r\n\r\nexport class Enumerable<TEntity> implements IEnumerable<TEntity>\r\n{\r\n    private _name: string = null;\r\n\r\n    protected _operations: Operations<TEntity>;\r\n    \r\n    constructor(items?: Array<TEntity>) \r\n    constructor(items?: Iterable<TEntity>) \r\n    constructor(items?: AsyncIterable<TEntity>)\r\n    constructor(private items?: any) {\r\n        this._operations = new Operations<TEntity>();\r\n\r\n        this.from(items);\r\n    }\r\n\r\n    public get name(): string {\r\n        if (this._name != null)\r\n            return this._name;\r\n\r\n        if(this.items)\r\n            return this.items.constructor.name;\r\n\r\n        return \"\";\r\n    }\r\n\r\n    public get operations(): Operations<TEntity> {\r\n        return this._operations;\r\n    }\r\n\r\n    /**\r\n     * A remapper of identifier names, members is seperated with dot.\r\n     * @param remapper Function that returns the new name of the identifier\r\n     */\r\n    public remap(remapper: (name: string) => string) : this\r\n    /**\r\n     * A remapper of values that corresponds to a identifier name\r\n     * @param remapper Function that returns the new value\r\n     */\r\n    public remap(remapper: (name: string, value: any) => any) : this\r\n    public remap(remapper: () => any) : this {\r\n        let visitor = remapper.length == 2 ? new RemapVisitor(null, remapper) : new RemapVisitor(remapper, null);\r\n    \r\n        for (let item of this._operations.values()) {\r\n            switch (item.type) {\r\n                case OperatorType.Where:\r\n                    (<WhereOperator<TEntity>>item).expression = visitor.visit((<WhereOperator<TEntity>>item).expression);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Where clause using OData $filter expression returning either true or false. Any parameters used is properties of TEntity\r\n     * @param predicate OData expression\r\n     */\r\n    public where(predicate: string): this \r\n    /**\r\n     * Where clause using Javascript expression returning either true or false\r\n     * @param predicate javascript expression\r\n     * @param parameters any javascript parameters has to be declared\r\n     */\r\n    public where(predicate: (it: TEntity, ...param: any[]) => boolean, ...parameters: any[]): this\r\n    public where(): this {\r\n        let predicate: any = arguments[0],\r\n            parameters: Array<any> = [];\r\n\r\n        if (arguments.length >= 2)\r\n            parameters = Array.from(arguments).slice(1)\r\n\r\n        switch (typeof predicate) {\r\n            case 'string':\r\n                this._operations.add(new WhereOperator<TEntity>('OData', predicate));\r\n                break;\r\n\r\n            case 'function':\r\n                this._operations.add(new WhereOperator<TEntity>('Javascript', predicate, ...parameters));\r\n                break;\r\n\r\n            default:\r\n                throw new Error('Where operator can not recognize predicate either as javascript or odata');\r\n        }\r\n\r\n        return this;\r\n    }\r\n   \r\n    /**\r\n    * returns a new IEnumerable of TResult\r\n    * @param selector\r\n    */\r\n    public select<TResult>(selector: (it: TEntity) => TResult): IEnumerable<TResult> {\r\n        if (typeof this.items == 'object' && typeof this.items[Symbol.asyncIterator] == 'function') {\r\n            return new Enumerable<TResult>(new SelectOperator<TEntity>(selector).evaluateAsync(this));\r\n        } else {\r\n            return new Enumerable<TResult>(new SelectOperator<TEntity>(selector).evaluate(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * returns a new IEnumerable of TResult (Left Join)\r\n     * @param inner\r\n     * @param outerKey\r\n     * @param innerKey\r\n     * @param selector A function that returns the new object, (outer, inner) => { outer, inner } or (outer, inner) => Object.assign({}, a, { childs: inner.toArray() })\r\n     * @param indexing If set to true an Array of outerKey will be passed into iterator of TInner as { keys: Array<any> }. Cons, all elements of outer iterator will be be kept in memory.\r\n     * @returns IEnumerable<TResult>\r\n     */\r\n    public groupJoin<TInner, TResult>(inner: Iterable<TInner>, outerKey: (outer: TEntity) => void, innerKey: (inner: TInner) => void, selector: (outer: TEntity, inner: IEnumerable<TInner>) => TResult, indexing?: boolean): IEnumerable<TResult>\r\n    /**\r\n     * returns a new IEnumerable of TResult (Left Join)\r\n     * @param inner\r\n     * @param outerKey\r\n     * @param innerKey\r\n     * @param selector A function that returns the new object, (outer, inner) => { outer, inner } or (outer, inner) => Object.assign({}, a, { childs: inner.toArray() })\r\n     * @param indexing If set to true an Array of outerKey will be passed into iterator of TInner as { keys: Array<any> }. Cons, all elements of outer iterator will be be kept in memory.\r\n     * @returns IEnumerable<TResult>\r\n     */\r\n    public groupJoin<TInner, TResult>(inner: AsyncIterable<TInner>, outerKey: (outer: TEntity) => void, innerKey: (inner: TInner) => void, selector: (outer: TEntity, inner: IEnumerable<TInner>) => TResult, indexing?: boolean): IEnumerable<TResult> \r\n    public groupJoin<TInner, TResult>(inner: Iterable<TInner> | AsyncIterable<TInner>, outerKey: (outer: TEntity) => void, innerKey: (inner: TInner) => void, selector: (outer: TEntity, inner: IEnumerable<TInner>) => TResult, indexing: boolean = false): IEnumerable<TResult> {\r\n        let iterable: Iterable<TInner> | AsyncIterable<TInner> = ((scope) => <any>{\r\n            [Symbol.asyncIterator]: (options) => {\r\n                return inner[Symbol.asyncIterator](Object.assign({ parent: scope }, options));\r\n            },\r\n            [Symbol.iterator]: (options) => {\r\n                return inner[Symbol.iterator](Object.assign({ parent: scope }, options));\r\n            }\r\n        })(this);\r\n\r\n        if (typeof inner == 'object' && typeof inner[Symbol.asyncIterator] == 'function') {\r\n            return new Enumerable<TResult>(new JoinOperator<TEntity, TInner, TResult>(JoinType.Left, outerKey, innerKey, selector, indexing).evaluateAsync(this, <AsyncIterable<TInner>>iterable));\r\n        } else {\r\n            return new Enumerable<TResult>(new JoinOperator<TEntity, TInner, TResult>(JoinType.Left, outerKey, innerKey, selector, indexing).evaluate(this, <Iterable<TInner>>iterable));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * returns a new IEnumerable of TResult (Inner Join)\r\n     * @param inner\r\n     * @param outerKey\r\n     * @param innerKey\r\n     * @param selector A function that returns the new object, (outer, inner) => { outer, inner } or (outer, inner) => Object.assign({}, a, { childs: inner.toArray() })\r\n     * @param indexing If set to true an Array of outerKey will be passed into iterator of TInner as { keys: Array<any> }. Cons, all elements of outer iterator will be be kept in memory.\r\n     * @returns IEnumerable<TResult>\r\n     */\r\n    public join<TInner, TResult>(inner: Iterable<TInner>, outerKey: (outer: TEntity) => void, innerKey: (inner: TInner) => void, selector: (outer: TEntity, inner: IEnumerable<TInner>) => TResult, indexing?: boolean): IEnumerable<TResult> \r\n    /**\r\n     * returns a new IEnumerable of TResult (Inner Join)\r\n     * @param inner\r\n     * @param outerKey\r\n     * @param innerKey\r\n     * @param selector A function that returns the new object, (outer, inner) => { outer, inner } or (outer, inner) => Object.assign({}, a, { childs: inner.toArray() })\r\n     * @param indexing If set to true an Array of outerKey will be passed into iterator of TInner as { keys: Array<any> }. Cons, all elements of outer iterator will be be kept in memory.\r\n     * @returns IEnumerable<TResult>\r\n     */\r\n    public join<TInner, TResult>(inner: AsyncIterable<TInner>, outerKey: (outer: TEntity) => void, innerKey: (inner: TInner) => void, selector: (outer: TEntity, inner: IEnumerable<TInner>) => TResult, indexing?: boolean): IEnumerable<TResult>\r\n    public join<TInner, TResult>(inner: Iterable<TInner> | AsyncIterable<TInner>, outerKey: (outer: TEntity) => void, innerKey: (inner: TInner) => void, selector: (outer: TEntity, inner: IEnumerable<TInner>) => TResult, indexing: boolean = false): IEnumerable<TResult> {\r\n        let iterable: Iterable<TInner> | AsyncIterable<TInner> = ((scope) => <any>{\r\n            [Symbol.asyncIterator]: (options) => {\r\n                return inner[Symbol.asyncIterator](Object.assign({ parent: scope }, options));\r\n            },\r\n            [Symbol.iterator]: (options) => {\r\n                return inner[Symbol.iterator](Object.assign({ parent: scope }, options));\r\n            }\r\n        })(this);\r\n\r\n        if (typeof inner == 'object' && typeof inner[Symbol.asyncIterator] == 'function') {\r\n            return new Enumerable<TResult>(new JoinOperator<TEntity, TInner, TResult>(JoinType.Inner, outerKey, innerKey, selector, indexing).evaluateAsync(this, <AsyncIterable<TInner>>iterable));\r\n        } else {\r\n            return new Enumerable<TResult>(new JoinOperator<TEntity, TInner, TResult>(JoinType.Inner, outerKey, innerKey, selector, indexing).evaluate(this, <Iterable<TInner>>iterable));\r\n        }\r\n    }\r\n\r\n    public take(count: number): this {\r\n        this._operations.add(new TakeOperator<TEntity>(count));\r\n\r\n        return this;\r\n    }\r\n\r\n    public skip(count: number): this {\r\n        this._operations.add(new SkipOperator<TEntity>(count));\r\n\r\n        return this;\r\n    }\r\n\r\n    public orderBy(property: (it: TEntity) => void): this {\r\n        this._operations.add(new OrderByOperator<TEntity>(property));\r\n\r\n        return this;\r\n    }\r\n\r\n    public from(items: Array<TEntity>) : this\r\n    public from(items: Iterable<TEntity>) : this\r\n    public from(items: AsyncIterable<TEntity>) : this\r\n    public from(items: Array<TEntity> | Iterable<TEntity> | AsyncIterable<TEntity>): this {\r\n        if (items) {\r\n            if (this._name == null)\r\n                this._name = items.constructor.name;\r\n\r\n            this.items = items;\r\n\r\n            if (typeof items == 'object' && typeof items[Symbol.asyncIterator] == 'function') {\r\n                this[Symbol.iterator] = undefined; // this isn't an sync iterator, unmark it from IEnumerable\r\n                this[Symbol.asyncIterator] = this.asyncIterator;\r\n            }\r\n            else if (typeof items == 'object' && typeof items[Symbol.iterator] == 'function') {\r\n                this[Symbol.asyncIterator] = undefined; // this isn't an async iterator, unmark it from IEnumerable\r\n                this[Symbol.iterator] = this.iterator;\r\n            }\r\n            else {\r\n                throw new TypeError('Enumerable is instanced with a non-iterable object');\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public first(items?: Array<TEntity>): TEntity {\r\n        if (items)\r\n            this.from(items);\r\n\r\n        let iteratorResult = this[Symbol.iterator]().next();\r\n        if (iteratorResult.done == false)\r\n            return iteratorResult.value;\r\n\r\n        return null;\r\n    }\r\n\r\n    public async firstAsync(items?: Array<TEntity>): Promise<TEntity> {\r\n        if (items)\r\n            this.from(items);\r\n\r\n        let iteratorResult = await this[Symbol.asyncIterator]().next();\r\n        if (iteratorResult.done == false)\r\n            return iteratorResult.value;\r\n\r\n        return null;\r\n    }\r\n\r\n    public toArray(items?: Iterable<TEntity>): Array<TEntity> {\r\n        if (items)\r\n            this.from(items);\r\n\r\n        let result: Array<TEntity> = [];\r\n        for (let item of this.iterator())\r\n            result.push(item);\r\n\r\n        return result;\r\n    }\r\n        \r\n    public async toArrayAsync(items?: Iterable<TEntity>): Promise<Array<TEntity>> {\r\n        if (items)\r\n            this.from(items);\r\n\r\n        let result: Array<TEntity> = [];\r\n        for await(let item of this.asyncIterator()) //.asyncIterator())\r\n            result.push(item);\r\n\r\n        return result;\r\n    }\r\n\r\n    public static fromArray<TEntity>(items?: Array<TEntity>): Enumerable<TEntity> {\r\n        return new Enumerable(items);\r\n    }\r\n\r\n    protected * iterator(options?: IEnumerableOptions<TEntity>): IterableIterator<TEntity> {\r\n        if (!options || options.query == null)\r\n            options = Object.assign(options || {}, { query: this });\r\n\r\n        let handleItems = function* (items: Iterable<TEntity>, operators: Array<Operator<TEntity>>, idx: number = null) { \r\n            if(idx == null) idx = operators.length - 1;\r\n            \r\n            switch(idx) {\r\n                case -1:\r\n                    yield* items; break;\r\n\r\n                case 0:\r\n                    yield* operators[idx].evaluate( items ); break;\r\n                \r\n                default:\r\n                    yield* operators[idx].evaluate( handleItems(items, operators, idx - 1) ); break;\r\n            }\r\n        }\r\n\r\n        yield* handleItems(this.items[Symbol.iterator](options), Array.from(this.operations.values()));\r\n    }\r\n\r\n    protected async * asyncIterator(options?: IEnumerableOptions<TEntity>): AsyncIterableIterator<TEntity> {\r\n        if (!options || options.query == null)\r\n            options = Object.assign(options || {}, { query: this });\r\n\r\n        let handleItems = async function* (items: AsyncIterable<TEntity>, operators: Array<Operator<TEntity>>, idx: number = null) { \r\n            if(idx == null) idx = operators.length - 1;\r\n            \r\n            switch(idx) {\r\n                case -1:\r\n                    for await (let item of items)\r\n                        yield item;\r\n                    \r\n                    break;\r\n\r\n                case 0:\r\n                    yield* operators[idx].evaluateAsync(items); break;\r\n                \r\n                default:\r\n                    yield* operators[idx].evaluateAsync(handleItems(items, operators, idx - 1)); break;\r\n            }\r\n        }\r\n\r\n        yield* handleItems(this.items[Symbol.asyncIterator](options), Array.from(this.operations.values()));        \r\n    }\r\n\r\n    [Symbol.asyncIterator] = (): AsyncIterableIterator<TEntity> => this.asyncIterator();\r\n    [Symbol.iterator] = (): IterableIterator<TEntity> => this.iterator();\r\n\r\n}\r\n\r\nexport default Enumerable;"]}